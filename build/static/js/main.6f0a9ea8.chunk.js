(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},20:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),r=a.n(o),l=(a(8),a(1)),c=a(2),s=a(4),m=a(3),u=a(5),g=a(6),p=a.n(g),d=a(10),h=function(e){var t=localStorage.getItem("imageModalMaxzIndex");t?(e.style.zIndex=+t+1,localStorage.setItem("imageModalMaxzIndex",e.style.zIndex)):(localStorage.setItem("imageModalMaxzIndex",1e3),e.style.zIndex=1e3);var a=0,n=0,i=0,o=0,r=!1;e.onmousedown=function(l){console.log("down"),t=localStorage.getItem("imageModalMaxzIndex"),e.style.zIndex!=t&&(e.style.zIndex=+t+1,localStorage.setItem("imageModalMaxzIndex",e.style.zIndex)),l.preventDefault(),a=l.clientX,n=l.clientY,i=e.offsetLeft,o=e.offsetTop,r=!0,e.style.cursor="move"},e.onmousemove=function(t){if(t.preventDefault(),0!=r){var l=t.clientX,c=t.clientY,s=l-(a-i),m=c-(n-o);e.style.left=s+"px",e.style.top=m+"px",e.querySelector(".image-content").style.opacity=.3}},e.onmouseup=function(){r=!1,e.style.cursor="default",e.querySelector(".image-content").style.opacity=1}},f=function(e,t){var a=e,n=parseInt(t.style.width),i=parseInt(t.style.left),o=n-a.deltaY;o<=300||i+o<50||(t.style.width="".concat(o,"px"))},b=a(11),v=function(){function e(t,a){Object(l.a)(this,e),this.container=t,this.option=Object(b.a)({width:"200px",height:"150px",opacity:.7,fillStyle:"rgba(47, 205, 227, 0.3)",font:"20px microsoft yahei",textBaseline:"middle",textAlign:"center",fillText:"\u6c34\u5370"},a)}return Object(c.a)(e,[{key:"draw",value:function(){var e=this.container,t=this.option,a=t.width,n=t.height,i=t.opacity,o=t.fillStyle,r=t.font,l=t.textBaseline,c=t.textAlign,s=t.fillText,m=t.scrollHeight,u=document.createElement("canvas");u.setAttribute("width",a),u.setAttribute("height",n),u.setAttribute("opacity",i);var g=u.getContext("2d");g.textAlign=c,g.textBaseline=l,g.font=r,g.fillStyle=o,g.rotate(Math.PI/180*30),g.fillText(s,80,10);var p=u.toDataURL(),d=document.createElement("div");d.setAttribute("style","\n          position:absolute;\n          top:0;\n          left:0;\n          width:100%;\n          height:".concat(m||"100%",";\n          z-index:1000;\n          pointer-events:none;\n          background-repeat:repeat;\n          background-image:url('").concat(p,"')")),"object"===typeof e&&(e.style.position="relative",e.insertBefore(d,e.firstChild))}}]),e}(),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).componentDidUpdate=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,i,o,r,l,c,s,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,i=n.visible,o=n.src,r=n.option,l=r.move,c=r.waterMarkText,i&&!t.visible&&(s=a.refs.imageModal,m=s.querySelector(".image-content"),l&&h(s),c&&new v(m,{fillText:c}).draw()),o!==t.src&&a.setState({imgRotate:0});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleRotateRight=function(){a.setState({imgRotate:a.state.imgRotate+90})},a.handleRotateLeft=function(){a.setState({imgRotate:a.state.imgRotate-90})},a.state={imgRotate:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.src,o=t.prev,r=t.next,l=t.closeModal,c=t.option,s=c.rotate,m=c.zoom,u=this.state.imgRotate;return i.a.createElement("div",null,a&&i.a.createElement("div",{ref:"imageModal",className:"image-modal",style:{width:"800px"},onWheel:function(t){return m&&f(t,e.refs.imageModal)},onContextMenu:function(e){e.preventDefault(),2===+e.button&&l()}},s&&i.a.createElement("span",{id:"rotate-left",onClick:this.handleRotateLeft},i.a.createElement("img",{src:"https://upload-images.jianshu.io/upload_images/5691297-f01bb4b7b31b7a5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/512/format/webp",alt:""})),s&&i.a.createElement("span",{id:"rotate-right",onClick:this.handleRotateRight},i.a.createElement("img",{src:"https://upload-images.jianshu.io/upload_images/5691297-f01bb4b7b31b7a5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/512/format/webp",alt:""})),i.a.createElement("span",{id:"close-icon",onClick:l},i.a.createElement("img",{src:"https://upload-images.jianshu.io/upload_images/5691297-79565d2f23ae3b18.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/32/format/webp",alt:""})),i.a.createElement("span",{id:"left-icon",onClick:o},"<"),i.a.createElement("span",{id:"right-icon",onClick:r},">"),i.a.createElement("div",{className:"image-content",ref:"imageContent"},i.a.createElement("img",{src:n,style:{width:"100%",transform:"rotate(".concat(u,"deg)")},alt:""}))))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleImgClick=function(e){a.setState({modalVisible:!0,currentImageIndex:e})},a.closeImg=function(){return a.setState({modalVisible:!1})},a.state={imageList:[],currentImageIndex:0,modalVisible:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({imageList:["http://pic39.photophoto.cn/20160630/1155115644653376_b.jpg","http://image.biaobaiju.com/uploads/20180801/23/1533136618-ARPmGQwjvD.jpg","http://img18.3lian.com/d/file/201712/08/8c2b94d5ec0bf634e3881b4ad5568b57.png","http://img3.duitang.com/uploads/blog/201509/15/20150915125228_ixEts.jpeg","https://s10.sinaimg.cn/mw690/001whaJHzy7kChbjZRn59&690","https://upload-images.jianshu.io/upload_images/5691297-648aed056c02698f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/542/format/webp"]})}},{key:"prev",value:function(){var e=this.state.currentImageIndex;e>0&&this.setState({currentImageIndex:e-1})}},{key:"next",value:function(){var e=this.state,t=e.currentImageIndex;t<e.imageList.length-1&&this.setState({currentImageIndex:t+1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalVisible,n=t.imageList,o=t.currentImageIndex;return i.a.createElement("div",{className:"container"},i.a.createElement("ul",{className:"image-list"},n.map(function(t,a){return i.a.createElement("li",null,i.a.createElement("img",{key:a,src:t,style:{width:"100px"},alt:"",onClick:function(){return e.handleImgClick(a)}}))})),i.a.createElement(x,{visible:a,src:n[o],next:function(){return e.next()},prev:function(){return e.prev()},closeModal:function(){return e.closeImg()},option:{move:!0,waterMarkText:"\u591a\u529f\u80fd\u56fe\u7247\u7ec4\u4ef6",rotate:!0,zoom:!0}}))}}]),t}(n.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(w,null),"github\u5730\u5740\uff1a",i.a.createElement("a",{href:"https://github.com/wtfjun/reactImageDemo"},"https://github.com/wtfjun/reactImageDemo"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){}},[[12,2,1]]]);
//# sourceMappingURL=main.6f0a9ea8.chunk.js.map